<script lang="ts" setup>

const route = useRoute()
const mp = ref({}) as any
const persistedStore = usePersistedStore();
const store = useMainStore();

onMounted(() => {
  store.info[persistedStore.current].title ? mp.value = store.info[persistedStore.current] : navigateTo('/')
})

const stepsBlockData = ref([
  {
    title: '–ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞',
    text: '–í—ã –º–æ–∂–µ—Ç–µ –ø–æ–ø–æ–ª–Ω–∏—Ç—å –±–∞–ª–∞–Ω—Å —Å —Ñ–∏–∑–∏—á–µ—Å–∫–æ–π –∫–∞—Ä—Ç—ã, –±–∏–∑–Ω–µ—Å-–∫–∞—Ä—Ç—ã –∏–ª–∏ —Ä–∞—Å—á—ë—Ç–Ω–æ–≥–æ —Å—á—ë—Ç–∞ ‚Äî –±—ã—Å—Ç—Ä–æ –∏ —É–¥–æ–±–Ω–æ.',
    image: '/img/steps/step1.png',
  },
  {
    title: '–í—ã–±–æ—Ä —É—Å–ª—É–≥–∏',
    text: '–û–∑–Ω–∞–∫–æ–º—å—Ç–µ—Å—å —Å –∫–∞—Ç–∞–ª–æ–≥–æ–º —É—Å–ª—É–≥ –∏–ª–∏ –∑–∞–ø—Ä–æ—Å–∏—Ç–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—É—é —É—Å–ª—É–≥—É, –ø–æ–¥—Ö–æ–¥—è—â—É—é –¥–ª—è –≤–∞—à–µ–≥–æ –±–∏–∑–Ω–µ—Å–∞.',
    image: '/img/steps/step2.png',
  },
  {
    title: '–°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞',
    text: '–ó–∞–ø–ª–∞–Ω–∏—Ä—É–π—Ç–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞ –≤ –ª—é–±–æ–µ —É–¥–æ–±–Ω–æ–µ –≤—Ä–µ–º—è ‚Äî —É—Å–ª—É–≥–∞ –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ —Ç–æ—á–Ω–æ –≤ —Å—Ä–æ–∫.',
    image: '/img/steps/step3.png',
  },
  {
    title: '–û—Ç—á—ë—Ç–Ω–æ—Å—Ç—å',
    text: '–í—Å—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏—è—Ö, –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ —É—Å–ª—É–≥ –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ –≤–∞—à–µ–º –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ.',
    image: '/img/steps/step4.png',
  }
])

const sections = [
{
    title: '–° —á–µ–≥–æ –Ω–∞—á–∞—Ç—å?',
    content: `
      –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ –Ω–∞—à–µ–π –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ ‚Äî —ç—Ç–æ –∑–∞–π–º—ë—Ç –≤—Å–µ–≥–æ –ø–∞—Ä—É –º–∏–Ω—É—Ç.<br><br>
      –û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö —É—Å–ª—É–≥ –¥–ª—è –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è –≤–∞—à–∏—Ö —Ü–µ–ª–µ–π. –ï—Å–ª–∏ –∑–∞—Ç—Ä—É–¥–Ω—è–µ—Ç–µ—Å—å, –æ—Å—Ç–∞–≤—å—Ç–µ –∑–∞—è–≤–∫—É, –∏ –Ω–∞—à–∞ –∫–æ–º–∞–Ω–¥–∞ –ø–æ–º–æ–∂–µ—Ç –≤–∞–º –≤—ã–±—Ä–∞—Ç—å –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–π –ø–∞–∫–µ—Ç.<br><br>
      –ü–æ—Å–ª–µ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏ –º—ã —Å—Ä–∞–∑—É –ø—Ä–∏—Å—Ç—É–ø–∏–º –∫ –ø—Ä–æ–¥–≤–∏–∂–µ–Ω–∏—é –≤–∞—à–∏—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –∏ –±—Ä–µ–Ω–¥–∞.<br><br>
      –í–µ—Å—å –ø—Ä–æ—Ü–µ—Å—Å –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –ø—Ä–æ—Å—Ç –∏ —É–¥–æ–±–µ–Ω, –∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –Ω–µ –∑–∞—Å—Ç–∞–≤—è—Ç —Å–µ–±—è –∂–¥–∞—Ç—å.`,
  },

  {
    title: '–ë–ª–æ–∫–∏—Ä—É—é—Ç –ª–∏ –∫–∞—Ä—Ç–æ—á–∫–∏ –ø—Ä–∏ –ø—Ä–æ–¥–≤–∏–∂–µ–Ω–∏–∏?',
    content: `      –ú—ã —Å–æ–±–ª—é–¥–∞–µ–º –≤—Å–µ —Ä–µ–≥–ª–∞–º–µ–Ω—Ç—ã –æ–Ω–ª–∞–π–Ω-–ø–ª–æ—â–∞–¥–æ–∫, —á—Ç–æ–±—ã –∏—Å–∫–ª—é—á–∏—Ç—å –ª—é–±—ã–µ —Ä–∏—Å–∫–∏ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫, —Å–∞–Ω–∫—Ü–∏–π –∏–ª–∏ –ø—Ä–µ—Ç–µ–Ω–∑–∏–π.<br><br>
      –ù–∞—à–∞ –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω–∞—è —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è –ø–æ–∑–≤–æ–ª—è–µ—Ç —É—Å–ø–µ—à–Ω–æ –ø—Ä–æ–¥–≤–∏–≥–∞—Ç—å —Ç–æ–≤–∞—Ä—ã –Ω–∞ –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–∞—Ö –∏ –¥—Ä—É–≥–∏—Ö –æ–Ω–ª–∞–π–Ω-–ø–ª–∞—Ç—Ñ–æ—Ä–º–∞—Ö.<br><br>
      –°–ª–µ–¥—É—è –Ω–∞—à–∏–º —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è–º –∏ —Ä–∞–±–æ—Ç–∞—è –Ω–∞–¥ —Ä–µ–ø—É—Ç–∞—Ü–∏–µ–π, —Ä–µ–π—Ç–∏–Ω–≥–æ–º –∏ –ø—Ä–æ–¥–∞–∂–∞–º–∏, –≤—ã –≤—Å–µ–≥–¥–∞ –æ—Å—Ç–∞–Ω–µ—Ç–µ—Å—å –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–æ—Å–ø–æ—Å–æ–±–Ω—ã–º–∏.`,
  },
  {
    title: '–°—Ä–æ–∫–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —É—Å–ª—É–≥',
    content: `
      –í—Å–µ –∑–∞–∫–∞–∑—ã –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è —Å—Ç—Ä–æ–≥–æ –≤ —Ä–∞–º–∫–∞—Ö —Ä–µ–≥–ª–∞–º–µ–Ω—Ç–∞.<br><br>
      –ù–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ –≤—ã –æ—Ñ–æ—Ä–º–∏–ª–∏ –∑–∞–∫–∞–∑ –Ω–∞ —É—Å–ª—É–≥—É ¬´–û—Ü–µ–Ω–∫–∞ –ø—Ä–æ–¥—É–∫—Ç–∞ –Ω–∞ WB¬ª —Å 13:00 –¥–æ 15:00 25.12.2024, –æ–Ω –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω –≤ —É–∫–∞–∑–∞–Ω–Ω—ã–π –ø–µ—Ä–∏–æ–¥.<br><br>
      –ü–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ –≤—ã —Å—Ä–∞–∑—É –ø–æ–ª—É—á–∞–µ—Ç–µ –æ—Ç—á—ë—Ç –æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö, —á—Ç–æ–±—ã –≤–∏–¥–µ—Ç—å –¥–∏–Ω–∞–º–∏–∫—É –ø—Ä–æ–¥–≤–∏–∂–µ–Ω–∏—è.
    `,
  },
  {
    title: '–ö–∞–∫ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –æ—Ç—á–µ—Ç–Ω–æ—Å—Ç—å?',
    content: `
      –í—Å—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ —É—Å–ª—É–≥ –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ –≤–∞—à–µ–º –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ.<br><br>
      –í—ã –º–æ–∂–µ—Ç–µ –≤–∏–¥–µ—Ç—å:<br>
      - –§–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏.<br>
      - –ü—Ä–æ–≥—Ä–µ—Å—Å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–∫–∞–∑–æ–≤.<br>
      - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ –∑–∞–¥–∞—á–∞–º.<br><br>
      –ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å –∏ —É–¥–æ–±—Å—Ç–≤–æ ‚Äî –æ—Å–Ω–æ–≤–∞ –Ω–∞—à–µ–π —Ä–∞–±–æ—Ç—ã.
    `,
  },
];

const openIndex = ref(0);

const handleAccordionToggle = (index:any) => {
  openIndex.value = openIndex.value === index ? null : index;
};

const phone = ref('');

const formatPhone = () => {
  let rawValue = phone.value.replace(/\D/g, "");

  if (!rawValue.startsWith("7")) {
    rawValue = "7" + rawValue;
  }

  let formattedValue = "+7";

  if (rawValue.length > 1) {
    formattedValue += ` (${rawValue.substring(1, 4)}`;
  }
  if (rawValue.length >= 5) {
    formattedValue += `) ${rawValue.substring(4, 7)}`;
  }
  if (rawValue.length >= 8) {
    formattedValue += `-${rawValue.substring(7, 9)}`;
  }
  if (rawValue.length >= 10) {
    formattedValue += `-${rawValue.substring(9, 11)}`;
  }

  phone.value = formattedValue;

  if (rawValue.length > 11) {
    phone.value = phone.value.substring(0, 18);
  }
};

const handleFocus = () => {
  if (phone.value === "") {
    phone.value = "+7 ";
  }
};

const handleBlur = () => {
  if (phone.value === "+7 ") {
    phone.value = "";
  }
};

const emojis = {
  start: 'üíº',
  growth: 'üöÄ',
  support: 'üìà',
}

const stepsBlock = ref([
  {
    title: '–ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞',
    description: '–í—ã –º–æ–∂–µ—Ç–µ –ø–æ–ø–æ–ª–Ω–∏—Ç—å –±–∞–ª–∞–Ω—Å —Å —Ñ–∏–∑–∏—á–µ—Å–∫–æ–π –∫–∞—Ä—Ç—ã, –±–∏–∑–Ω–µ—Å-–∫–∞—Ä—Ç—ã –∏–ª–∏ —Ä–∞—Å—á—ë—Ç–Ω–æ–≥–æ —Å—á—ë—Ç–∞ ‚Äî –±—ã—Å—Ç—Ä–æ –∏ —É–¥–æ–±–Ω–æ.',
    image: '/img/mpSteps/step1.png',
  },
  {
    title: '–í—ã–±–æ—Ä —É—Å–ª—É–≥–∏',
    description: '–û–∑–Ω–∞–∫–æ–º—å—Ç–µ—Å—å —Å –∫–∞—Ç–∞–ª–æ–≥–æ–º —É—Å–ª—É–≥ –∏–ª–∏ –∑–∞–ø—Ä–æ—Å–∏—Ç–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—É—é —É—Å–ª—É–≥—É, –ø–æ–¥—Ö–æ–¥—è—â—É—é –¥–ª—è –≤–∞—à–µ–≥–æ –±–∏–∑–Ω–µ—Å–∞.',
    image: '/img/mpSteps/step2.png',
  },
  {
    title: '–°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞',
    description: '–ó–∞–ø–ª–∞–Ω–∏—Ä—É–π—Ç–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞ –≤ –ª—é–±–æ–µ —É–¥–æ–±–Ω–æ–µ –≤—Ä–µ–º—è ‚Äî —É—Å–ª—É–≥–∞ –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ —Ç–æ—á–Ω–æ –≤ —Å—Ä–æ–∫.',
    image: '/img/mpSteps/step3.png',
  },
  {
    title: '–û—Ç—á—ë—Ç–Ω–æ—Å—Ç—å',
    description: '–í—Å—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏—è—Ö, –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ —É—Å–ª—É–≥ –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ –≤–∞—à–µ–º –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ.',
    image: '/img/mpSteps/step4.png',
  },
])

const harmexPluses = ref([
  {
    icon: 'mage:zap',
    title: '–†–æ—Å—Ç –ø—Ä–æ–¥–∞–∂', 
    text: '–°–æ–∑–¥–∞—ë–º —ç—Ñ—Ñ–µ–∫—Ç —Ä–µ–∞–ª—å–Ω–æ–≥–æ —Å–ø—Ä–æ—Å–∞, –ø–æ–¥–Ω–∏–º–∞—è –≤–∞—à –ø—Ä–æ–¥—É–∫—Ç –≤ –¢–û–ü –ø–æ —Å–∞–º—ã–º —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–º –ø–æ–∏—Å–∫–æ–≤—ã–º –∑–∞–ø—Ä–æ—Å–∞–º –¥–ª—è –ø—Ä–∏–≤–ª–µ—á–µ–Ω–∏—è –Ω–æ–≤—ã—Ö –ø–æ–∫—É–ø–∞—Ç–µ–ª–µ–π.',
  },
  {
    icon: 'mynaui:chat-messages',
    title: '–ü–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–µ –æ—Ç–∑—ã–≤—ã', 
    text: '–î–æ–±–∞–≤–ª—è–µ–º –¥–æ—Å—Ç–æ–≤–µ—Ä–Ω—ã–µ –æ—Ü–µ–Ω–∫–∏ –æ—Ç –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, —É–∫—Ä–µ–ø–ª—è—è –¥–æ–≤–µ—Ä–∏–µ –∫ –≤–∞—à–µ–º—É –±—Ä–µ–Ω–¥—É —É –ø–æ–∫—É–ø–∞—Ç–µ–ª–µ–π –∏ –ø–ª–æ—â–∞–¥–æ–∫.',
  },
  {
    icon: 'hugeicons:chart-breakout-square',
    title: '–£–∫—Ä–µ–ø–ª–µ–Ω–∏–µ –∏–º–∏–¥–∂–∞ –±—Ä–µ–Ω–¥–∞', 
    text: '–ü–æ–¥–¥–µ—Ä–∂–∞–Ω–∏–µ –≤—ã—Å–æ–∫–æ–≥–æ —Ä–µ–π—Ç–∏–Ω–≥–∞ —Å–æ–∑–¥–∞–µ—Ç –ø—Ä–µ–≤–æ—Å—Ö–æ–¥–Ω—ã–π –æ–±—Ä–∞–∑ –∫–æ–º–ø–∞–Ω–∏–∏, –≤—ã–¥–µ–ª—è—è –µ—ë —Å—Ä–µ–¥–∏ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–æ–≤.',
  },
  {
    icon: 'streamline:chat-bubble-oval-smiley-1',
    title: '–ü—Ä–∏–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –±—Ä–µ–Ω–¥–∞', 
    text: '–î–µ–ª–∞–µ–º –≤–∞—à –ø—Ä–æ–¥—É–∫—Ç –ø–æ–ø—É–ª—è—Ä–Ω—ã–º –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–µ, —Å—Ç–∏–º—É–ª–∏—Ä—É—è —Å–ø—Ä–æ—Å –∏ –ø–æ–≤—ã—à–∞—è –¥–æ–≤–µ—Ä–∏–µ –ø–æ–∫—É–ø–∞—Ç–µ–ª–µ–π.',
  },
])

const slides = [
  { type: "desktop", content: "/img/slider/finance.svg" },
  { type: "desktop", content: "/img/slider/step2.svg" },
];

const currentIndex = ref(0);

const content =  [
    {
      title: "–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å",
      value: 'security',
      icon: 'bitcoin-icons:shield-outline',
      // image: "/path/to/security-image.jpg",
      points: [
        "–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∑–∞—â–∏—Ç–∞: –ö—Ä—É–≥–ª–æ—Å—É—Ç–æ—á–Ω–∞—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –±–µ–∑ –≤–∞—à–µ–≥–æ —É—á–∞—Å—Ç–∏—è.",
        "–ù–∏–∫–∞–∫–∏—Ö —Å–∫—Ä—ã—Ç—ã—Ö –∑–∞—Ç—Ä–∞—Ç: –í—Å—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —É–∂–µ –≤–∫–ª—é—á–µ–Ω–∞ ‚Äî –Ω–∏—á–µ–≥–æ –¥–æ–∫—É–ø–∞—Ç—å –Ω–µ –Ω—É–∂–Ω–æ.",
        "–°–æ–±–ª—é–¥–µ–Ω–∏–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–æ–≤: –ú—ã —Å—Ç—Ä–æ–≥–æ —Å–ª–µ–¥–∏–º –∑–∞ –Ω–æ—Ä–º–∞–º–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–æ–≤.",
        "–ö—Ä—É–≥–ª–æ—Å—É—Ç–æ—á–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥: –í–∞—à–∏ –¥–∞–Ω–Ω—ã–µ –ø–æ–¥ –∑–∞—â–∏—Ç–æ–π 24/7.",
        "–ö–æ–Ω—Ç—Ä–æ–ª—å –ø–æ–∫—É–ø–æ–∫: –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –¥–æ 6 –ø–æ–∫—É–ø–æ–∫ –≤ –º–µ—Å—è—Ü –¥–ª—è –≤–∞—à–µ–≥–æ —Å–ø–æ–∫–æ–π—Å—Ç–≤–∏—è.",
        "–í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –∞–∫–∫–∞—É–Ω—Ç–æ–≤: –ö–∞–∂–¥—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—Ä–æ—Ö–æ–¥–∏—Ç —Å—Ç—Ä–æ–≥—É—é –ø—Ä–æ–≤–µ—Ä–∫—É."
      ]
    },
    {
      title: "–°–∫–æ—Ä–æ—Å—Ç—å",
      value: 'speed',
      icon: 'formkit:time',
      // image: "/path/to/speed-image.jpg",
      points: [
        "–ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–∫–∞–∑–æ–≤: –°–æ–∑–¥–∞–≤–∞–π—Ç–µ –∑–∞–∫–∞–∑—ã –Ω–∞ –¥–Ω–∏ –∏ –Ω–µ–¥–µ–ª–∏ –≤–ø–µ—Ä–µ–¥ –≤ –ø–∞—Ä—É –∫–ª–∏–∫–æ–≤.",
        "–û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏: –í—Å–µ —Å—Ç–∞—Ç—É—Å—ã –∑–∞–∫–∞–∑–æ–≤ –¥–æ—Å—Ç—É–ø–Ω—ã –º–≥–Ω–æ–≤–µ–Ω–Ω–æ.",
        "–≠–∫–æ–Ω–æ–º–∏—è –≤—Ä–µ–º–µ–Ω–∏: –û—Å–≤–æ–±–æ–∂–¥–∞–µ–º –¥–æ 3 —á–∞—Å–æ–≤ –≤ –¥–µ–Ω—å –¥–ª—è –≤–∞–∂–Ω—ã—Ö –∑–∞–¥–∞—á.",
        "–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—Ç—á–µ—Ç–Ω–æ—Å—Ç—å: –ì–æ—Ç–æ–≤—ã–µ –æ—Ç—á–µ—Ç—ã —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∑–∞–∫–∞–∑–æ–≤.",
        "–£–ø—Ä–æ—â–µ–Ω–Ω—ã–µ —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏: –í—Å–µ —Ä–∞—Å—á–µ—Ç—ã –Ω–∞ –Ω–∞—à–µ–π —Å—Ç–æ—Ä–æ–Ω–µ."
      ]
    },
    {
      title: "–†–µ–∑—É–ª—å—Ç–∞—Ç–∏–≤–Ω–æ—Å—Ç—å",
      value: 'results',
      icon: 'ph:intersect-duotone',
      // image: "/path/to/results-image.jpg", 
      points: [
        "–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤: –†–µ—à–∞–π—Ç–µ –∑–∞–¥–∞—á–∏ –±–µ–∑ –ª–∏—à–Ω–∏—Ö –¥–µ–π—Å—Ç–≤–∏–π.",
        "–í—Å–µ –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ: –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç –∫–∞–∫ —Ü–µ–Ω—Ç—Ä —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è.",
        "–ò–ò-–ø–æ–º–æ—â–Ω–∏–∫–∏: –£–º–Ω—ã–µ –∞–ª–≥–æ—Ä–∏—Ç–º—ã –¥–ª—è –±—ã—Å—Ç—Ä—ã—Ö –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã—Ö —Ä–µ—à–µ–Ω–∏–π.",
        "–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –º–Ω–æ–≥–æ–∫–∞–Ω–∞–ª—å–Ω—ã—Ö –ø—Ä–æ–¥–∞–∂: –£–ø—Ä–∞–≤–ª—è–π—Ç–µ —Ç–æ–≤–∞—Ä–∞–º–∏ –∏ –∑–∞–∫–∞–∑–∞–º–∏ —Å —Ä–∞–∑–Ω—ã—Ö –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–æ–≤ –∏ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω–æ–≤ –≤ –æ–¥–Ω–æ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ.",
        "–ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏: –ò–ò-–∞–ª–≥–æ—Ä–∏—Ç–º—ã –ø—Ä–µ–¥–ª–∞–≥–∞—é—Ç –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –¥–ª—è –ø–æ–≤—ã—à–µ–Ω–∏—è –ø—Ä–æ–¥–∞–∂ –Ω–∞ –æ—Å–Ω–æ–≤–µ –≤–∞—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö."
      ]
    }
]
const currentContent = ref('security');
const contentBlock = ref(null);
const blockHeight = ref(0);

const getBlockHeight = async () => {
  await nextTick(); 

  if (contentBlock.value && contentBlock.value.length > 0) {
    const firstBlock = contentBlock.value[0];
    
    if (firstBlock) {
      blockHeight.value = firstBlock.offsetHeight; 
    }
  }
};


onMounted(() => {
  getBlockHeight();
});

onMounted(() => {
  setInterval(() => {
    currentIndex.value = (currentIndex.value + 1) % stepsBlock.value.length; 
  }, 3500);
  setInterval(() => {
  const currentIndex = content.findIndex(item => item.value === currentContent.value);

  if (currentIndex !== -1) {
    const nextIndex = (currentIndex + 1) % content.length;

    currentContent.value = content[nextIndex].value;
  }
}, 30000);
});
</script>

<template>
    <div class="flex flex-col gap-0 bg-[#EAEAEA38]">
      <section class="flex flex-col gap-5 px-6 py-8 sm:pt-[64px] sm:pb-[80px] items-center justify-center bg-gradient-to-b from-[#FFFFFF] from-[45%] to-[#fef8f3] to-[100%] border-b border-[#0A0A0A12]">
        <h1 class="text-[28px] leading-[33px] sm:text-[48px] sm:leading-[56px] font-[700] max-w-[632px] text-center text-[#1D1D1D]"> –†–µ–ø—É—Ç–∞—Ü–∏—è –∏ –ø—Ä–æ–¥–∞–∂–∏ –ø–æ–¥ –≤–∞—à–∏–º –∫–æ–Ω—Ç—Ä–æ–ª–µ–º –Ω–∞ {{ mp.title }}!</h1>
        <p class="text-[18px] leading-[28px] font-[400] text-[#0A0A0AB2] max-w-[480px] text-center">–£–≤–µ–ª–∏—á–∏–≤–∞–π—Ç–µ –∑–∞–∫–∞–∑—ã –∏ –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–µ –æ—Ç–∑—ã–≤—ã 24/7 —Å Harmex ‚Äî –≤–∞—à –Ω–∞–¥–µ–∂–Ω—ã–π –ø–æ–º–æ—â–Ω–∏–∫ –≤ –±–æ—Ä—å–±–µ –∑–∞ –≤—ã—Å–æ–∫–∏–π —Ä–µ–π—Ç–∏–Ω–≥ –∏ –¥–æ–≤–µ—Ä–∏–µ –∫–ª–∏–µ–Ω—Ç–æ–≤!</p>
        <div class="flex gap-2">
            <button @click="navigateTo('https://app.harmex.ru/auth', { external: true })" class="btn-primary lg:h-[60px] lg:!px-[32px] !max-h-[40px] flex items-center">
              –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å
              <Icon name="lucide:arrow-right" class="w-5 h-5 ml-1"/>
            </button>
            <a href="#contact">
              <button class="btn-primary flex gap-3 !bg-white !font-[400] !text-black !max-h-[40px]">
                <Icon name="lucide:phone" class="w-5 h-5"/>
                <span>–û–±—Ä–∞—Ç–Ω—ã–π –∑–≤–æ–Ω–æ–∫</span>
              </button>
            </a>
        </div>
      </section>

      <section class="bg-white px-6 lg:px-[120px] py-12 lg:py-14 flex flex-col gap-14">
        <div class="flex flex-col justify-center items-center gap-5">
          <h1 class="block-title">–ü–æ—á–µ–º—É Harmex –≤–∞–∂–µ–Ω –¥–ª—è –≤–∞—à–µ–≥–æ –±–∏–∑–Ω–µ—Å–∞?</h1>
          <p class="text-[18px] leading-[28px] font-[400] text-[#0A0A0AB2] max-w-[480px] text-center">–°–∫—Ä—ã—Ç—ã–µ –æ—à–∏–±–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –º–µ—à–∞—é—Ç –≤–∞–º –≤—ã–π—Ç–∏ –≤ —Ç–æ–ø –∏ —É–≤–µ–ª–∏—á–∏—Ç—å –ø—Ä–æ–¥–∞–∂–∏ –Ω–∞ {{ mp.title }}</p>
        </div>
        <div class="flex justify-between gap-8  lg:w-[50%] max-w-[600px] mx-auto">
          <div class="flex flex-col gap-6 items-center" v-for="item in content">
            <button @click="[currentContent = item.value]" class="flex justify-center items-center btn-primary w-16 h-16" :class="{ '!bg-[#F7F7F7] !text-black': item.value !== currentContent }">
              <Icon :name="item.icon" class="w-7 h-7"/>
            </button>
            <p class="md:text-[20px] text-[12px] font-[600] leading-[30px]">{{ item.title }}</p>
          </div>
        </div>

        <div id="slideshow"  class="relative overflow-hidden min-h-[400px] w-full -mb-32 lg:-mb-0  sm:my-0 z-0" :style="blockHeight !== 0 ? { height: blockHeight+150 + 'px' } : {height: '800px'}" >
          <transition-group name="fade" tag="div">
            <div
              v-for="(slide, index) in content"
              :key="index"
              v-show="currentContent === slide.value"
              class="absolute w-full h-full lg:h-[580px] xl:h-[100%] -mb-20"
            >
              <div class="flex w-full justify-between lg:flex-row flex-col p-4 md:p-12 gap-4 md:gap-12 bg-[#F7F7F7] rounded-2xl overflow-hidden" ref="contentBlock" :style="blockHeight !== 0 ? { height: blockHeight + 'px' } : {}">          
                <div class="flex flex-col gap-6 md:gap-8 max-w-1/3">
                  <p class="text-[18px] leading-[24px] md:font-[600] md:text-[24px] md:leading-[29px]">–ö–∞–∫ —ç—Ç—É –∑–∞–¥–∞—á—É —Ä–µ—à–∏–ª Harmex:</p>
                  <div class="flex gap-3 items-center" v-for="item in content.find(item => item.value === currentContent).points">
                    <div class="w-[20px] h-[20px] flex items-center justify-center">
                      <Icon name="icon-park-solid:check-one" class="w-[20px] h-[20px] text-[--primary]"/>
                    </div>
                    <p class="text-[#5A556B] text-[16px] leading-[24px] font-[500]">         
                      <span>{{ item.split(':')[0] }}:</span>
                      <br />
                      <span>{{ item.split(':')[1].trim() }}</span> 
                    </p>
                  </div>
                </div>
                <div class="relative w-full lg:max-w-[566px] max-h-[400px] lg:max-h-full lg:h-full flex lg:my-auto">
                  <Nuxt-img 
                    :src="`/img/buisnessBlock/${index+1}.png`" 
                    class="w-full h-full object-contain lg:object-cover rounded-xl"
                  />
                </div>
              </div>
            </div>
          </transition-group>
        </div>
      </section>


      <section class="bg-white py-14 px-6 lg:px-[120px] lg:pt-14 lg:pb-[112px] flex flex-col gap-8 lg:gap-14 justify-center items-center w-full" >
        <h1 class="block-title text-center"> –ü–æ—á–µ–º—É –≤—ã–±–∏—Ä–∞—é—Ç HARMEX?</h1>
        <Nuxt-Img src="/img/harmex.svg" class="w-full max-w-[1120px] max-h-[700px] flex mx-auto"/>
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4">
            <div v-for="item in harmexPluses" class="bg-[#F4F4F4] p-6 rounded-[10px] w-full">
              <div class="bg-[--primary] text-white p-3 rounded-[10px] w-fit max-h-[49px] mb-16 "> 
                <Icon :name="item.icon" class="w-6 h-6"/>
              </div>
              <p class="mb-2 text-[#101828] font-[600] text-[18px] leading-[30px]">{{ item.title }}</p>
              <p class="text-[#475467] font-[400] text-[16px] leading-[24px]">{{ item.text }}</p>
            </div>
        </div>
        <a href="#contact">
          <button class="btn-primary flex gap-3 !rounded-3xl !bg-[#04201A] !font-[400]">
            <Icon name="lucide:phone" class="w-5 h-5"/>
            <span>–û–±—Ä–∞—Ç–Ω—ã–π –∑–≤–æ–Ω–æ–∫</span>
          </button>
        </a>
      </section>

      <section class="py-8 px-6 lg:py-20 lg:px-28 bg-white flex flex-col gap-14">
        <h1 class="block-title max-w-[652px] mt-10 !text-left">
          –ü—Ä–æ—Å—Ç–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É—Å–ª—É–≥–∞–º–∏ –≤ 4 —à–∞–≥–∞
        </h1>
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4">
          <div class="flex flex-col gap-1 justify-between" v-for="(item, index) in stepsBlock">
            <div class="flex flex-col gap-1">
              <li class="flex w-full items-center after:content-[''] after:w-full after:h-1 after:border-b after:border-1 after:inline-block" 
                :class="{ 'after:bg-[linear-gradient(to_right,_#6366F1_50%,_white_50%)]': index === 0, 'after:bg-white': index !== 0 }">
                <span class="flex items-center justify-center w-8 h-8 rounded-full shrink-0" 
                      :class="{ 'bg-[#6366F1] text-white': index === 0, 'bg-white border': index !== 0 }">
                  {{ index+1 }}
                </span>
              </li>
              <p class="font-[600] text-[20px] leading-[28px] mr-6">{{ item.title }}</p>
              <p class="text-[#0A0A0AB2] text-[18px] leading-[28px] mr-6">{{ item.description }}</p>
            </div>
          </div>
          
        </div>
        <!-- <div class="relative w-full overflow-hidden justify-center">
            <div class="flex w-full items-center overflow-y-auto max-w-[50%] mx-auto">
              <Nuxt-Img
                v-for="(item, index) in stepsBlock"
                :key="index"
                :src="item.image"
                class="w-full h-auto max-w-[100%] object-contain mb-6"
              />
            </div>
        </div> -->

      </section>

      <section class="bg-white flex flex-col py-0 px-0 lg:px-16 items-center justify-center">
        <div id="slideshow" class="relative overflow-hidden h-[400px] lg:min-h-[800px] w-full -mt-5 -mb-10 sm:my-0 z-0">
          <transition-group name="fade" tag="div">
            <div
              v-for="(slide, index) in stepsBlock"
              :key="index"
              v-show="currentIndex === index"
              class="absolute w-full h-full lg:h-[580px] xl:h-[100%]"
            >
              <NuxtImg 
                :src="slide.image"
                class="w-full lg:w-[90%]  object-fill flex max-w-[1500px] mx-auto rounded-md" 
                alt="Finance image"
              />
            </div>
          </transition-group>
        </div>
        <a href="#contact" class="my-10 -mt-10 sm:mt-0 lg:-mt-32 xl:mt-20 z-10">
          <button class="btn-primary flex gap-3 !rounded-3xl !bg-[#04201A] !font-[400]">
            <Icon name="lucide:phone" class="w-5 h-5"/>
            <span>–û–±—Ä–∞—Ç–Ω—ã–π –∑–≤–æ–Ω–æ–∫</span>
          </button>
        </a>
      </section>

      <section class="w-full flex flex-col gap-16 py-8 px-6 lg:py-24 lg:px-28">
        <h1 class="block-title">–¢–∞—Ä–∏—Ñ—ã –¥–ª—è –ª—é–±–æ–≥–æ –±–∏–∑–Ω–µ—Å–∞</h1>
        <div class="flex lg:flex-row flex-col gap-5">
          <div
            v-if="mp"
            v-for="(item, key) in mp.price"
            :key="key"
            class="flex flex-col gap-4 flex-1 p-8 rounded-2xl bg-white"
          >
            <div class="flex justify-between">
              <p class="text-[18px] leading-[28px] text-[#667085]">
                <span class="emoji-container">{{ emojis[key] }}</span> {{ item.title }}
              </p>
              <span
                class="text-[--primary] bg-[#FFF0E9] rounded-2xl py-1 px-3"
                v-if="item.title === '–†–æ—Å—Ç'"
              >
                –ü–æ–ø—É–ª—è—Ä–Ω—ã–π
              </span>
            </div>
            <p class="text-[50px] leading-[60px] font-[600]">–æ—Ç {{ item.value }}</p>
            <p class="text-[#667085] text-[16px] leading-[24px]">{{ item.description }}</p>
            <button class="mt-4 btn-primary h-[48px] text-[16px] leading-[24px]" @click="navigateTo('https://app.harmex.ru/auth', { external: true })">–í—ã–±—Ä–∞—Ç—å —Ç–∞—Ä–∏—Ñ</button>
          </div>

        </div>
      </section>

      <section class="w-full rounded-[12px] flex items-center lg:px-[64px] py-8 px-6 lg:py-20 bg-white flex-col ">
          <h1 class="lg:text-[30px] text-[24px] leading-[36px] font-[700] mb-10 lg:mb-12">–î–æ –∏ –ü–æ—Å–ª–µ</h1>
          <p class="text-[#4B5563] text-[16px] font-[400] leading-[25px] mb-8">–°—Ä–∞–≤–Ω–∏—Ç–µ –∫–∞—Ä—Ç–æ—á–∫–∏ –¥–æ —Ä–∞–±–æ—Ç—ã —Å –Ω–∞–º–∏ (–Ω–∏–∑–∫–∏–π —Ä–µ–π—Ç–∏–Ω–≥) –∏ –ø–æ—Å–ª–µ (4.9). –ü—Ä–∏–º–µ—Ä—ã –Ω–∞–≥–ª—è–¥–Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç, –∫–∞–∫ –∏–∑–º–µ–Ω—è–µ—Ç—Å—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å.</p>
          <Slider />
      </section>

      <section class="w-full rounded-[12px] flex items-center py-8 px-6 lg:py-20 lg:px-[195px] bg-white flex-col lg:gap-12 gap-14">

          <div class="flex lg:flex-row flex-col justify-between gap-8">
          <div class="flex flex-col justify-start ">
              <h1 class="text-[24px] leading-[29px] lg:text-[40px] lg:leading-[48px] font-[600] max-w-[507px] !text-left">–ß–∞—Å—Ç–æ –∑–∞–¥–∞–≤–∞–µ–º—ã–µ –≤–æ–ø—Ä–æ—Å—ã</h1>
              <Nuxt-Img src="/img/questMan.svg" class="hidden lg:flex max-w-[240px] max-h-[285px]" />
          </div>

          <div class="lg:w-1/2 lg:max-w-1/2 w-full ">
              <Accordion
              v-for="(section, index) in sections"
              :key="index"
              :title="section.title"
              :isOpen="openIndex === index"
              @update:isOpen="handleAccordionToggle(index)"
              >
                <div v-html="section.content"></div>
              </Accordion>

          </div>  
          </div>
      </section>

      <section id="contact" class="w-full rounded-[12px] flex lg:flex-row flex-col items-center py-8 px-6 lg:p-16 bg-[--primary] gap-6 lg:gap-12 justify-between">
          <div class="flex flex-col gap-6 max-w-[100%] sm:max-w-[50%] xl:max-w-[36%] text-white">
          <h1 class="text-[24px] leading-[29px] lg:text-[40px] lg:leading-[48px] font-[600] !text-left">–ë—É–¥—å—Ç–µ –∞–∫—Ç–∏–≤–Ω–µ–µ, –ø—Ä–æ—â–µ –∏ –±–ª–∏–∂–µ –∫ —Å–≤–æ–∏–º –∫–ª–∏–µ–Ω—Ç–∞–º —Å Harmex!</h1>
          <p class="font-[500] text-[14px] leading-[21px] lg:text-[16px] lg:leading-[24px]">–ï—Å—Ç—å –≤–æ–ø—Ä–æ—Å—ã, –ø–æ–∂–µ–ª–∞–Ω–∏—è –∏–ª–∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è? –ù–∞–ø–∏—à–∏—Ç–µ –Ω–∞–º –∏–ª–∏ –æ—Å—Ç–∞–≤—å—Ç–µ –∑–∞—è–≤–∫—É ‚Äî –º—ã —Å–≤—è–∂–µ–º—Å—è —Å –≤–∞–º–∏ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –±—ã—Å—Ç—Ä–æ!</p>
          </div>
          <div class="flex flex-col gap-3 max-w-[100%] sm:max-w-[50%] lg:max-w-[40%] xl:max-w-[30%]">
          <div class="flex lg:flex-row flex-col gap-1.5">
              <input
              id="phone-input"
              v-model="phone"
              placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞"
              @focus="handleFocus"
              @blur="handleBlur"
              @input="formatPhone"
              class="w-full px-4 py-3 text-[14px] font-medium rounded-[10px] border border-gray-300 h-[60px]"
              />
          <button class="btn-black">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
          </div>
          <p class="font-[400] text-[12px] leading-[16px] text-[#323232A3]">
              –°–æ–≥–ª–∞—Å–µ–Ω –Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫—É –∏ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –º–æ–∏—Ö –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å <a class="text-[#323232]" href="#">–£—Å–ª–æ–≤–∏—è–º–∏</a>
          </p>
          </div>
      </section>
    </div>
</template>

<style scoped>

#slideshow > div { 
  position: absolute; 
  top: 10px; 
  left: 10px; 
  right: 10px; 
  bottom: 10px; 
}

.fade-enter-active, .fade-leave-active {
  transition: opacity 1s ease-in-out, transform 1s ease-in-out;
}

.fade-enter-from, .fade-leave-to {
  opacity: 0;
  transform: translateX(100%);
}

.fade-enter-to, .fade-leave-from {
  opacity: 1;
  transform: translateX(0); 
}

.fade-leave-to {
  transform: translateX(-100%);
}
@media (min-width: 2000px) {
  .max-w {
    max-width: 400px;
  }
}
</style>